define(["exports"],function(a){"use strict";function b(a){return Object.prototype.toString.call(a).match(/\[object (.*?)\]/)[1].toLowerCase()}function c(a){return"object"===b(a)}function d(a){return"function"===b(a)}function e(a){return a&&(1===a.nodeType||9===a.nodeType)}function f(a){return"string"===b(a)}function g(){return this}function h(a){return a.replace(/\-(.)/g,function(a,b){return b.toUpperCase()})}function i(a){return y.call(arguments,1).forEach(function(b){if(c(b))for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])}),a}function j(a,b){for(;a&&a!==x.body;){if(k(a,b))return a;a=a.parentElement}return null}function k(a,b){var c="MatchesSelector",d=a["webkit"+c]||a["moz"+c]||a["ms"+c]||a["o"+c]||a.matchesSelector||a.matches;return d.call(a,b)}function l(a){var b=[];if(a===w||a===x)return[];for(;e(a);)p(a)&&b.push(a),a=a.parentElement;return b}function m(a){return p(a)?a:null}function n(a,b){var c,e=y.call(arguments,2),f=0;if(p(a)&&(a=[a]),!a)return this;for(c=a.length;c>f;f++)d(a[f][b])&&a[f][b].apply(a[f],e);return this}function o(a){for(var b,c,d={},e=0;e<a.attributes.length;e++){b=h(a.attributes[e].name),c=a.attributes[e].value;try{c=JSON.parse(c)}catch(f){}d[b]=c}return d}function p(a){return e(a)&&!!a.getAttribute("is")}function q(a,b){var c,d,e,f,g,h,i,k,m,n,o,q=a.target,r=p(q),s=r?q.getAttribute("is"):null,t=a.type;for(b||(b=l(r?q.el:q)),k=0,n=b.length;n>k;k++)if(c=b[k],d=c._events)for(m=0,o=d.length;o>m;m++)g=d[m][0],f=d[m][1],h=d[m][2],g===t&&(f?r?f===s&&h.call(c,a):(e=j(q,f),e&&h.call(c,a,e)):h.call(c,a));if(i=B[t])for(k=0,n=i.length;n>k;k++)i[k].fn.call(i[k].ctx,a,x.body)}function r(a,b){b=b||{};var c=b["extends"]||"div",d=Object.getPrototypeOf(document.createElement(c)),e=Object.create(d);return Object.keys(D).forEach(function(a){var b=Object.getOwnPropertyDescriptor(D,a);Object.defineProperty(e,a,b)}),Object.keys(b).forEach(function(a){if("extends"!==a){var c=Object.getOwnPropertyDescriptor(b,a);Object.defineProperty(e,a,c)}}),document.registerElement(a,{prototype:e,"extends":c})}function s(){var a,b;for(a in C)b=-1!==["resize","scroll"].indexOf(a)?window:x.body,b.addEventListener(a,q,!!C[a])}function t(a){return u(a)[0]}function u(a){return y.call(document.querySelectorAll('[is="'+a+'"]'))}function v(a){return u(a).forEach(function(a){a.destroy()}),this}if("undefined"==typeof window)throw new Error("components requires an environment with a window");var w=window,x=w.document,y=[].slice,z=[].filter,A=[].map,B={},C={click:!1,dblclick:!1,mousedown:!1,mouseup:!1,mousemove:!1,mouseleave:!0,mouseenter:!0,touchstart:!1,touchmove:!1,touchend:!1,keyup:!1,keydown:!1,error:!0,blur:!0,focus:!0,scroll:!0,submit:!0,change:!0,resize:!0,load:!0};a.fromElement=m,a.isComponent=p,a.handleEvent=q,a.register=r,a.init=s,a.getInstanceOf=t,a.getInstancesOf=u,a.destroy=v;var D={createdCallback:function(){this._events=[],this.el=this,this.opts=i({},d(this.defaultOptions)?this.defaultOptions():this.defaultOptions,o(this)),this.init(),this.setupEvents(this.registerEvent.bind(this)),this.render()},attachedCallback:function(){this.onInsert(),this.emit("inserted")},detachedCallback:function(){this.onRemove()},setOptions:function(a){return i(this.opts,a),this},template:null,init:g,setupEvents:g,render:function(){var a=this.template,b=d(a),c=f(a);return(b||c)&&(this.innerHTML=b?a.call(this,this):a),this},emit:function(a,b,c){b=b||{},b.target=b.target||this,b.type=a,b.customEvent=!0,q(b,c)},insertBefore:function(a){if(a=e(a)?a:null,!a)return this;var b=a.parentElement;return b&&b.insertBefore(this,a),this},insertAfter:function(a){if(a=e(a)?a:null,!a)return this;var b=a.parentNode;return b&&b.insertBefore(this,a.nextSibling),this},appendTo:function(a){return e(a)?(a.appendChild(this),this):this},onInsert:g,remove:function(){return this.parentElement?(this.beforeRemove(),n(this.find("[is]"),"beforeRemove"),this.emit("remove"),this.parentElement.removeChild(this),this):this},beforeRemove:g,onRemove:g,beforeDestroy:g,destroy:function(){return this.beforeDestroy(),n(this.find("[is]"),"beforeDestroy"),this.remove(),null},find:function(a){return y.call(this.querySelectorAll(a))},findComponent:function(a){return m(this.find("[is="+a+"]")[0])},findComponents:function(a){return A.call(this.find("[is="+a+"]"),m)},invoke:n,registerEvent:function(a,b,c){return 2===arguments.length&&(c=b,b=null),this._events.push([a,b,c]),this},releaseEvent:function(a,b,c){d(b)&&!c&&(c=b,b=null),d(c)||(c=null),"undefined"==typeof b&&(b=null),this._events=z.call(this._events,function(d){var e=d[0],f=d[1],g=d[2];return c?!(e===a&&f===b&&g===c):!(e===a&&f===b)})},setGlobalHandler:function(a,b){return B[a]=B[a]||[],B[a].push({fn:b,ctx:this}),this},releaseGlobalHandler:function(a,b){var c=B[a],d=this;return c?(B[a]=z.call(c,function(a){return a.fn!==b||a.ctx!==d}),this):this}}});